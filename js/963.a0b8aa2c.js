"use strict";(self["webpackChunkwangyiyun_web"]=self["webpackChunkwangyiyun_web"]||[]).push([[963],{4376:function(e,t,i){i.d(t,{Fk:function(){return h},I3:function(){return a},XI:function(){return s},d4:function(){return c},dX:function(){return u},e_:function(){return p},hi:function(){return o},mf:function(){return n},n1:function(){return m},nz:function(){return l},rC:function(){return d}});var r=i(7344);function o(e,t,i){return(0,r.Z)({method:"GET",url:`/search?keywords=${e}}&type=1&limit=${t}&offset=${i}`})}function n(e,t){return(0,r.Z)({method:"GET",url:`/search?keywords=${e}&type=100&limit=${20*t}`})}function s(e,t,i){return(0,r.Z)({method:"GET",url:`/search?keywords=${e}&type=10&limit=${t}&offset=${i}`})}function a(e,t,i){return(0,r.Z)({method:"GET",url:`/search?keywords=${e}&type=1014&limit=${t}&offset=${i}`})}function l(e,t,i){return(0,r.Z)({method:"GET",url:`/search?keywords=${e}&type=1000&limit=${t}&offset=${i}`})}function u(e,t,i){return(0,r.Z)({method:"GET",url:`/search?keywords=${e}&type=1006&limit=${t}&offset=${i}`})}function c(e){return(0,r.Z)({method:"GET",url:`/search?keywords=${e}&type=1009`})}function d(e,t,i){return(0,r.Z)({method:"GET",url:`/search?keywords=${e}&type=2000&limit=${t}&offset=${i}`})}function m(e,t,i){return(0,r.Z)({method:"GET",url:`/search?keywords=${e}&type=1002&limit=${t}&offset=${i}`})}function h(e,t){return(0,r.Z)({method:"GET",url:`/artist/detail?id=${e}&cookie=${t}`})}function p(e,t){return(0,r.Z)({method:"GET",url:`/artist/follow/count?id=${e}&cookie=${t}`})}},3963:function(e,t,i){i.r(t),i.d(t,{default:function(){return I}});var r=i(1132),o=(i(4484),i(2229)),n=(i(9619),i(3396)),s=i(9242),a=i(7139);const l=e=>((0,n.dD)("data-v-47056c14"),e=e(),(0,n.Cn)(),e),u={class:"video_box"},c=(0,n.Uk)("载入中..."),d={class:"videoCount"},m={class:"videos"},h=["onClick"],p={class:"video_pic_box"},v=["src"],f={class:"playKey"},g=l((()=>(0,n._)("svg",{class:"icon","aria-hidden":"true"},[(0,n._)("use",{"xlink:href":"#icon-bofang2"})],-1))),y={class:"durationms"},w={class:"video_bottom"},k={class:"video_title"},$={key:0,class:"video_mv"},C={class:"title"},T=["innerHTML"],_={class:"video_creator"},V={key:0,class:"by"},b={class:"creator"},x=["innerHTML"],H={key:1};function D(e,t,i,l,D,S){const E=o.g,Z=r.t,K=(0,n.Q2)("lazy");return(0,n.wg)(),(0,n.iD)("div",u,[(0,n.wy)((0,n.Wm)(E,{vertical:"",type:"spinner"},{default:(0,n.w5)((()=>[c])),_:1},512),[[s.F8,1==D.isLoading]]),(0,n._)("div",d,"找到"+(0,a.zw)(D.videoCount)+"个视频",1),(0,n._)("div",m,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(D.videos,((e,t)=>((0,n.wg)(),(0,n.iD)("div",{class:(0,a.C_)((t+1)%4==0?"video videoFour":"video"),key:t,onClick:t=>S.goVideoPlayer(e.vid)},[(0,n._)("div",p,[(0,n.wy)((0,n._)("img",{src:e.coverUrl},null,8,v),[[K,e.coverUrl]]),(0,n._)("div",f,[g,(0,n._)("span",null,(0,a.zw)(S.formatCount(e.playTime)),1)]),(0,n._)("div",y,[(0,n._)("span",null,(0,a.zw)(S.formatDt(e.durationms)),1)])]),(0,n._)("div",w,[(0,n._)("div",k,[e.vid.length<10?((0,n.wg)(),(0,n.iD)("div",$,"MV")):(0,n.kq)("",!0),(0,n._)("span",C,(0,a.zw)(S.activeTitle(e.title)),1),1==this.isVHtmlTitle?((0,n.wg)(),(0,n.iD)("span",{key:1,class:"title",innerHTML:D.vHtmlTitle},null,8,T)):(0,n.kq)("",!0)]),(0,n._)("div",_,[S.creatorBy(e.creator[0].userId)?((0,n.wg)(),(0,n.iD)("span",V,"by")):(0,n.kq)("",!0),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.creator,((t,i)=>((0,n.wg)(),(0,n.iD)("span",{key:i},[(0,n._)("span",b,(0,a.zw)(S.activeCreator(t.userName)),1),1==this.isVHtmlCreator?((0,n.wg)(),(0,n.iD)("span",{key:0,class:"creator",innerHTML:D.vHtmlCreators},null,8,x)):(0,n.kq)("",!0),i<e.creator.length-1?((0,n.wg)(),(0,n.iD)("span",H,"/")):(0,n.kq)("",!0)])))),128))])])],10,h)))),128))]),(0,n.Wm)(Z,{class:"pagination",onChange:S.pageChange,modelValue:D.currentPage,"onUpdate:modelValue":t[0]||(t[0]=e=>D.currentPage=e),"prev-text":"<","next-text":">","total-items":D.videoCount,"show-page-size":9,"items-per-page":D.limit,"force-ellipses":""},null,8,["onChange","modelValue","total-items","items-per-page"])])}var S=i(4239),E=i(4376),Z={data(){return{isLoading:1,limit:24,offset:0,currentPage:1,zero:0,searchKey:"",videos:[],videoCount:0,vHtmlCreators:"",isVHtmlCreator:0,vHtmlTitle:"",isVHtmlTitle:0}},mounted(){this.searchKey=S.Z.state.searchKey,sessionStorage.getItem("searchKey")&&this.getSearchVideo()},methods:{async getSearchVideo(){let e=await(0,E.I3)(sessionStorage.getItem("searchKey"),this.limit,this.offset);this.videoCount=e.data.result.videoCount,this.videos=e.data.result.videos,0!==this.videos.length&&(this.isLoading=0)},pageChange(){this.offset=(this.currentPage-1)*this.limit,this.getSearchVideo()},formatCount(e){return this.$formatCount(e)},formatDt(e){return this.$formatDuration(e)},creatorBy(e){return e.toString().length>8},activeCreator(e){let t=new RegExp(this.searchKey,"g"),i='<span style="color: rgb(27, 94, 195)">'+this.searchKey+"</span>";return e=e.replace(t,i),-1==e.indexOf(this.searchKey)?(this.isVHtmlCreator=0,e):(this.isVHtmlCreator=1,this.vHtmlCreators=e,"")},activeTitle(e){let t=new RegExp(this.searchKey,"g"),i='<span style="color: rgb(27, 94, 195)">'+this.searchKey+"</span>";return e=e.replace(t,i),-1==e.indexOf(this.searchKey)?(this.isVHtmlTitle=0,e):(this.isVHtmlTitle=1,this.vHtmlTitle=e,"")},goVideoPlayer(e){let t=e.length<10?1:2;1==t?this.$router.push({path:"/VideoPlayer",query:{mvid:e,type:1}}):this.$router.push({path:"/VideoPlayer",query:{videoid:videoid,type:2}})}}},K=i(89);const P=(0,K.Z)(Z,[["render",D],["__scopeId","data-v-47056c14"]]);var I=P},1132:function(e,t,i){i.d(t,{t:function(){return f}});var r=i(1404),o=i(3396),n=i(610),s=i(5323),a=i(6048);const l="van-hairline",u=`${l}--surround`,[c,d,m]=(Symbol("van-form"),(0,n["do"])("pagination")),h=(e,t,i)=>({number:e,text:t,active:i}),p={mode:(0,s.SQ)("multi"),prevText:String,nextText:String,pageCount:(0,s.SI)(0),modelValue:(0,s.qM)(0),totalItems:(0,s.SI)(0),showPageSize:(0,s.SI)(5),itemsPerPage:(0,s.SI)(10),forceEllipses:Boolean};var v=(0,o.aZ)({name:c,props:p,emits:["change","update:modelValue"],setup(e,{emit:t,slots:i}){const r=(0,o.Fl)((()=>{const{pageCount:t,totalItems:i,itemsPerPage:r}=e,o=+t||Math.ceil(+i/+r);return Math.max(1,o)})),n=(0,o.Fl)((()=>{const t=[],i=r.value,o=+e.showPageSize,{modelValue:n,forceEllipses:s}=e;let a=1,l=i;const u=o<i;u&&(a=Math.max(n-Math.floor(o/2),1),l=a+o-1,l>i&&(l=i,a=l-o+1));for(let e=a;e<=l;e++){const i=h(e,e,e===n);t.push(i)}if(u&&o>0&&s){if(a>1){const e=h(a-1,"...");t.unshift(e)}if(l<i){const e=h(l+1,"...");t.push(e)}}return t})),s=(i,o)=>{i=(0,a.uZ)(i,1,r.value),e.modelValue!==i&&(t("update:modelValue",i),o&&t("change",i))};(0,o.m0)((()=>s(e.modelValue)));const l=()=>(0,o.Wm)("li",{class:d("page-desc")},[i.pageDesc?i.pageDesc():`${e.modelValue}/${r.value}`]),c=()=>{const{mode:t,modelValue:r}=e,n=i["prev-text"],a=1===r;return(0,o.Wm)("li",{class:[d("item",{disabled:a,border:"simple"===t,prev:!0}),u]},[(0,o.Wm)("button",{type:"button",disabled:a,onClick:()=>s(r-1,!0)},[n?n():e.prevText||m("prev")])])},p=()=>{const{mode:t,modelValue:n}=e,a=i["next-text"],l=n===r.value;return(0,o.Wm)("li",{class:[d("item",{disabled:l,border:"simple"===t,next:!0}),u]},[(0,o.Wm)("button",{type:"button",disabled:l,onClick:()=>s(n+1,!0)},[a?a():e.nextText||m("next")])])},v=()=>n.value.map((e=>(0,o.Wm)("li",{class:[d("item",{active:e.active,page:!0}),u]},[(0,o.Wm)("button",{type:"button","aria-current":e.active||void 0,onClick:()=>s(e.number,!0)},[i.page?i.page(e):e.text])])));return()=>(0,o.Wm)("nav",{role:"navigation",class:d()},[(0,o.Wm)("ul",{class:d("items")},[c(),"simple"===e.mode?l():v(),p()])])}});const f=(0,r.n)(v)},4484:function(e,t,i){i(1958)}}]);
//# sourceMappingURL=963.a0b8aa2c.js.map