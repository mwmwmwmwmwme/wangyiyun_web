"use strict";(self["webpackChunkwangyiyun_web"]=self["webpackChunkwangyiyun_web"]||[]).push([[24],{3479:function(e,t,s){s.d(t,{Fk:function(){return o},Hv:function(){return u},ah:function(){return i},b:function(){return r},pU:function(){return a},tx:function(){return l}});var n=s(7344);function o(e,t){return(0,n.Z)({method:"GET",url:`/artist/detail?id=${e}&cookie=${t}`})}function i(e,t,s){return(0,n.Z)({method:"GET",url:`/artist/album?id=${e}&cookie=${t}&limit=${s}`})}function a(e,t,s){return(0,n.Z)({method:"GET",url:`/artist/mv?id=${e}&cookie=${t}&limit=${s}`})}function r(e,t){return(0,n.Z)({method:"GET",url:`/artist/desc?id=${e}&cookie=${t}`})}function l(e,t){return(0,n.Z)({method:"GET",url:`/simi/artist?id=${e}&cookie=${t}`})}function u(e,t){return(0,n.Z)({method:"GET",url:`/artist/top/song?id=${e}&cookie=${t}`})}},5393:function(e,t,s){s.d(t,{O2:function(){return l},Sq:function(){return a},aA:function(){return u},lw:function(){return i},mV:function(){return o},nh:function(){return r},sB:function(){return c}});var n=s(7344);function o(e,t){return(0,n.Z)({method:"GET",url:`/mv/detail?mvid=${e}&cookie=${t}`})}function i(e,t){return(0,n.Z)({method:"GET",url:`/mv/detail/info?mvid=${e}&cookie=${t}`})}function a(e,t){return(0,n.Z)({method:"GET",url:`/comment/mv?id=${e}&cookie=${t}`})}function r(e,t){return(0,n.Z)({method:"GET",url:`/mv/url?id=${e}&cookie=${t}`})}function l(e,t){return(0,n.Z)({method:"GET",url:`/video/detail?id=${e}&cookie=${t}`})}function u(e,t){return(0,n.Z)({method:"GET",url:`/comment/video?id=${e}&cookie=${t}`})}function c(e,t){return(0,n.Z)({method:"GET",url:`/video/url?id=${e}&cookie=${t}`})}},9850:function(e,t,s){s.r(t),s.d(t,{default:function(){return gt}});var n=s(3396),o=s(7139),i=s(9242);const a=e=>((0,n.dD)("data-v-645354a3"),e=e(),(0,n.Cn)(),e),r={class:"videoPlayer"},l={class:"container"},u={class:"container_top"},c=a((()=>(0,n._)("use",{"xlink:href":"#icon-zuojiantou1"},null,-1))),m=[c],d={key:0},h={key:1},v={class:"videoPlayBox"},g=["src"],f={class:"creater"},p={class:"head"},k=["src","v-lazy"],_={key:0,class:"name"},y={key:1,class:"name"},w={key:2,class:"follow"},C=a((()=>(0,n._)("svg",{class:"icon","aria-hidden":"true"},[(0,n._)("use",{"xlink:href":"#icon-jia"})],-1))),I=a((()=>(0,n._)("span",null,"关注",-1))),D=[C,I],$={class:"videoNameBox"},z={class:"videoName"},M={key:0},b={key:1},x=a((()=>(0,n._)("use",{"xlink:href":"#icon-below-s"},null,-1))),N=[x],T=a((()=>(0,n._)("use",{"xlink:href":"#icon-below-s-copy"},null,-1))),H=[T],Z={class:"num"},q={key:0},S={key:1},E={key:2},P={key:3},U={class:"desc"},G={key:0},V={key:1},A={class:"buttons"},F={class:"button"},B=a((()=>(0,n._)("svg",{class:"icon","aria-hidden":"true"},[(0,n._)("use",{"xlink:href":"#icon-dianzan"})],-1))),L={key:0},R={key:1},j={class:"button"},Y=a((()=>(0,n._)("svg",{class:"icon","aria-hidden":"true"},[(0,n._)("use",{"xlink:href":"#icon-favorite"})],-1))),K={key:0},O={key:1},W={class:"button"},Q=a((()=>(0,n._)("svg",{class:"icon fenxiang","aria-hidden":"true"},[(0,n._)("use",{"xlink:href":"#icon-60fenxiang-"})],-1))),J={key:0},X={key:1},ee={key:0,class:"button"},te=a((()=>(0,n._)("svg",{class:"icon","aria-hidden":"true"},[(0,n._)("use",{"xlink:href":"#icon-xiazai"})],-1))),se=a((()=>(0,n._)("span",null,"下载MV",-1))),ne=[te,se],oe=a((()=>(0,n._)("span",{class:"report"},"举报",-1))),ie={class:"userComments"},ae={class:"userComments_top"},re=a((()=>(0,n._)("span",{class:"commentWord"},"评论",-1))),le={class:"commentsNum"},ue={class:"publishBox"},ce=["maxlength"],me={class:"maxlengthNum"},de={class:"box_bottom"},he=(0,n.uE)('<div class="bb_left" data-v-645354a3><svg class="icon" aria-hidden="true" data-v-645354a3><use xlink:href="#icon-jinghao" data-v-645354a3></use></svg><svg class="icon" aria-hidden="true" data-v-645354a3><use xlink:href="#icon-aite1" data-v-645354a3></use></svg><svg class="icon" aria-hidden="true" data-v-645354a3><use xlink:href="#icon-xiaolian" data-v-645354a3></use></svg></div>',1),ve=a((()=>(0,n._)("span",null,"评论",-1))),ge=[ve],fe={class:"wonderfulComments"},pe={key:0,class:"wonderfulComments_top"},ke=a((()=>(0,n._)("span",null,"精彩评论",-1))),_e=[ke],ye=["onMouseenter"],we={class:"wonderfulComment_left"},Ce=["src","onClick"],Ie={class:"wonderfulComment_right"},De={class:"wonderfulComment_right_top"},$e={class:"content"},ze=["onClick"],Me={class:"wonderfulComment_right_bottom"},be={class:"publishTime"},xe={class:"functions"},Ne={class:"zan"},Te=["onMouseenter"],He=a((()=>(0,n._)("use",{"xlink:href":"#icon-dianzan"},null,-1))),Ze=[He],qe=["onMouseenter"],Se=(0,n.uE)('<span class="verticalLine" data-v-645354a3>|</span><svg class="icon fenxiang" aria-hidden="true" data-v-645354a3><use xlink:href="#icon-60fenxiang-" data-v-645354a3></use></svg><span class="verticalLine" data-v-645354a3>|</span><svg class="icon kuaisuhuifu" aria-hidden="true" data-v-645354a3><use xlink:href="#icon-kuaisuhuifu" data-v-645354a3></use></svg>',4),Ee={key:0,class:"moreWonderfulComments"},Pe=a((()=>(0,n._)("span",null,"更多精彩评论",-1))),Ue=a((()=>(0,n._)("svg",{class:"icon","aria-hidden":"true"},[(0,n._)("use",{"xlink:href":"#icon-youjiantou1"})],-1))),Ge=[Pe,Ue],Ve={class:"latestComments"},Ae={key:0,class:"latestComments_top"},Fe=["onMouseenter"],Be={class:"latestComment_left"},Le=["src","onClick"],Re={class:"latestComment_right"},je={class:"latestComment_right_top"},Ye={class:"content"},Ke=["onClick"],Oe={class:"latestComment_right_bottom"},We={class:"publishTime"},Qe={class:"functions"},Je=a((()=>(0,n._)("span",{class:"verticalLine"},"|",-1))),Xe={class:"zan"},et=["onMouseenter"],tt=a((()=>(0,n._)("use",{"xlink:href":"#icon-dianzan"},null,-1))),st=[tt],nt=["onMouseenter"],ot=(0,n.uE)('<span class="verticalLine" data-v-645354a3>|</span><svg class="icon fenxiang" aria-hidden="true" data-v-645354a3><use xlink:href="#icon-60fenxiang-" data-v-645354a3></use></svg><span class="verticalLine" data-v-645354a3>|</span><svg class="icon kuaisuhuifu" aria-hidden="true" data-v-645354a3><use xlink:href="#icon-kuaisuhuifu" data-v-645354a3></use></svg>',4),it={key:1,class:"noComment"},at=a((()=>(0,n._)("span",null,"还没有评论，快来抢沙发~",-1))),rt=[at];function lt(e,t,s,a,c,C){const I=(0,n.Q2)("lazy");return(0,n.wg)(),(0,n.iD)("div",r,[(0,n._)("div",l,[(0,n._)("div",u,[((0,n.wg)(),(0,n.iD)("svg",{class:"icon","aria-hidden":"true",onClick:t[0]||(t[0]=e=>this.$router.go(-1))},m)),1==c.type?((0,n.wg)(),(0,n.iD)("span",d,"MV详情")):((0,n.wg)(),(0,n.iD)("span",h,"视频详情"))]),(0,n._)("div",v,[(0,n._)("video",{class:"video",src:1==c.type?c.mvUrl:c.videoUrl,controls:"",autoplay:""}," 您的浏览器不支持 video 标签。 ",8,g)]),(0,n._)("div",f,[(0,n._)("div",p,[(0,n._)("img",{src:1==c.type?c.artistDetail.artist?.cover:c.videoInfo.creator?.avatarUrl,"v-lazy":1==c.type?c.artistDetail.artist?.cover:c.videoInfo.creator?.avatarUrl,onClick:t[1]||(t[1]=(...e)=>C.goHeadCreater&&C.goHeadCreater(...e))},null,8,k)]),1==c.type?((0,n.wg)(),(0,n.iD)("div",_,[(0,n._)("span",{onClick:t[2]||(t[2]=e=>C.goSingerPage(c.artistId))},(0,o.zw)(c.mvInfo?.artistName),1)])):(0,n.kq)("",!0),2==c.type?((0,n.wg)(),(0,n.iD)("div",y,[(0,n._)("span",{onClick:t[3]||(t[3]=e=>C.gotoPersonalHome(c.videoInfo?.creator.userId))},(0,o.zw)(c.videoInfo.creator?.nickname),1)])):(0,n.kq)("",!0),2==c.type?((0,n.wg)(),(0,n.iD)("div",w,D)):(0,n.kq)("",!0)]),(0,n._)("div",$,[(0,n._)("div",z,[1==c.type?((0,n.wg)(),(0,n.iD)("span",M,(0,o.zw)(c.mvInfo.name),1)):((0,n.wg)(),(0,n.iD)("span",b,(0,o.zw)(c.videoInfo.title),1)),(0,n.wy)(((0,n.wg)(),(0,n.iD)("svg",{class:"icon","aria-hidden":"true",onClick:t[4]||(t[4]=e=>c.isDesc=!c.isDesc)},N,512)),[[i.F8,!c.isDesc&&c.mvInfo.desc]]),(0,n.wy)(((0,n.wg)(),(0,n.iD)("svg",{class:"icon","aria-hidden":"true",onClick:t[5]||(t[5]=e=>c.isDesc=!c.isDesc)},H,512)),[[i.F8,c.isDesc]])]),(0,n._)("div",Z,[1==c.type?((0,n.wg)(),(0,n.iD)("span",q,"发布："+(0,o.zw)(c.mvInfo.publishTime),1)):(0,n.kq)("",!0),2==c.type?((0,n.wg)(),(0,n.iD)("span",S,"发布："+(0,o.zw)(C.formatPublishTime(c.videoInfo.publishTime)),1)):(0,n.kq)("",!0),1==c.type?((0,n.wg)(),(0,n.iD)("span",E,"播放："+(0,o.zw)(C.changeCount(c.mvInfo.playCount))+"次",1)):(0,n.kq)("",!0),2==c.type?((0,n.wg)(),(0,n.iD)("span",P,"播放："+(0,o.zw)(C.changeCount(c.videoInfo.playTime))+"次",1)):(0,n.kq)("",!0)]),(0,n.wy)((0,n._)("div",U,[1==c.type?((0,n.wg)(),(0,n.iD)("span",G,(0,o.zw)(c.mvInfo.desc),1)):((0,n.wg)(),(0,n.iD)("span",V,(0,o.zw)(c.videoInfo.description),1))],512),[[i.F8,c.isDesc]])]),(0,n._)("div",A,[(0,n._)("div",F,[B,1==c.type?((0,n.wg)(),(0,n.iD)("span",L,"赞("+(0,o.zw)(c.mvNums.likedCount)+")",1)):((0,n.wg)(),(0,n.iD)("span",R,"赞("+(0,o.zw)(c.videoInfo.praisedCount)+")",1))]),(0,n._)("div",j,[Y,1==c.type?((0,n.wg)(),(0,n.iD)("span",K,"收藏("+(0,o.zw)(c.mvInfo.subCount)+")",1)):((0,n.wg)(),(0,n.iD)("span",O,"收藏("+(0,o.zw)(c.videoInfo.subscribeCount)+")",1))]),(0,n._)("div",W,[Q,1==c.type?((0,n.wg)(),(0,n.iD)("span",J,"分享("+(0,o.zw)(c.mvNums.shareCount)+")",1)):((0,n.wg)(),(0,n.iD)("span",X,"分享("+(0,o.zw)(c.videoInfo.shareCount)+")",1))]),1==c.type?((0,n.wg)(),(0,n.iD)("div",ee,ne)):(0,n.kq)("",!0),oe]),(0,n._)("div",ie,[(0,n._)("div",ae,[re,(0,n._)("span",le,"("+(0,o.zw)(c.totalNum)+")",1)]),(0,n._)("div",ue,[(0,n.wy)((0,n._)("textarea",{class:"commentInput",maxlength:c.maxlength,"onUpdate:modelValue":t[6]||(t[6]=e=>c.commentContent=e),onKeydown:t[7]||(t[7]=(0,i.D2)(((...e)=>C.postComment&&C.postComment(...e)),["enter"]))},null,40,ce),[[i.nr,c.commentContent]]),(0,n._)("div",me,[(0,n._)("span",null,(0,o.zw)(c.leftover),1)]),(0,n._)("div",de,[he,(0,n._)("div",{class:"bb_right",onClick:t[8]||(t[8]=(...e)=>C.postComment&&C.postComment(...e))},ge)])]),(0,n._)("div",fe,[0!==c.tenHotComments.length?((0,n.wg)(),(0,n.iD)("div",pe,_e)):(0,n.kq)("",!0),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(this.tenHotComments,((e,s)=>((0,n.wg)(),(0,n.iD)("div",{class:"wonderfulComment",key:e.commentId,onMouseenter:e=>C.mouseenter(s,1),onMouseleave:t[11]||(t[11]=e=>C.mouseleave(1))},[(0,n._)("div",we,[(0,n.wy)((0,n._)("img",{src:e.user?.avatarUrl,onClick:t=>C.gotoPersonalHome(e.user.userId)},null,8,Ce),[[I,e.user?.avatarUrl]])]),(0,n._)("div",Ie,[(0,n._)("div",De,[(0,n._)("div",$e,[(0,n._)("span",{class:"userName",onClick:t=>C.gotoPersonalHome(e.user.userId)},(0,o.zw)(e.user?.nickname)+"：",9,ze),(0,n._)("span",null,(0,o.zw)(e.content),1)])]),(0,n._)("div",Me,[(0,n._)("div",be,[(0,n._)("span",null,(0,o.zw)(C.publishTime(e.time,e.timeStr)),1)]),(0,n._)("div",xe,[(0,n._)("span",{class:"report",ref_for:!0,ref:"report"},"举报   |",512),(0,n._)("div",Ne,[((0,n.wg)(),(0,n.iD)("svg",{class:"icon",ref_for:!0,ref:"zanIcon","aria-hidden":"true",onMouseenter:e=>C.zanMouseenter(s,1),onMouseleave:t[9]||(t[9]=e=>C.zanMouseleave(1))},Ze,40,Te)),(0,n._)("span",{class:"likesNum",ref_for:!0,ref:"zanNum",onMouseenter:e=>C.zanMouseenter(s,1),onMouseleave:t[10]||(t[10]=e=>C.zanMouseleave(1))},(0,o.zw)(e.likedCount),41,qe)]),Se])])])],40,ye)))),128))]),c.isTab?((0,n.wg)(),(0,n.iD)("div",Ee,[(0,n._)("div",{class:"words",onClick:t[12]||(t[12]=(...e)=>C.goMoreHotComments&&C.goMoreHotComments(...e))},Ge)])):(0,n.kq)("",!0),(0,n._)("div",Ve,[0!==c.latestComments.length?((0,n.wg)(),(0,n.iD)("div",Ae,[(0,n._)("span",null,"最新评论("+(0,o.zw)(c.totalNum)+")",1)])):(0,n.kq)("",!0),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(this.latestComments,((e,s)=>((0,n.wg)(),(0,n.iD)("div",{class:"latestComment",key:e.commentId,onMouseenter:e=>C.mouseenter(s,2),onMouseleave:t[15]||(t[15]=e=>C.mouseleave(2))},[(0,n._)("div",Be,[(0,n.wy)((0,n._)("img",{src:e.user?.avatarUrl,onClick:t=>C.gotoPersonalHome(e.user.userId)},null,8,Le),[[I,e.user?.avatarUrl]])]),(0,n._)("div",Re,[(0,n._)("div",je,[(0,n._)("div",Ye,[(0,n._)("span",{class:"userName",onClick:t=>C.gotoPersonalHome(e.user.userId)},(0,o.zw)(e.user?.nickname)+"：",9,Ke),(0,n._)("span",null,(0,o.zw)(e.content),1)])]),(0,n._)("div",Oe,[(0,n._)("div",We,[(0,n._)("span",null,(0,o.zw)(C.publishTime(e.time,e.timeStr)),1)]),(0,n._)("div",Qe,[(0,n._)("span",{class:"latestReport",ref_for:!0,ref:"latestReport"},"举报",512),Je,(0,n._)("div",Xe,[((0,n.wg)(),(0,n.iD)("svg",{class:"icon",ref_for:!0,ref:"latestZanIcon","aria-hidden":"true",onMouseenter:e=>C.zanMouseenter(s,2),onMouseleave:t[13]||(t[13]=e=>C.zanMouseleave(2))},st,40,et)),(0,n._)("span",{class:"likesNum",ref_for:!0,ref:"latestZanNum",onMouseenter:e=>C.zanMouseenter(s,2),onMouseleave:t[14]||(t[14]=e=>C.zanMouseleave(2))},(0,o.zw)(e.likedCount),41,nt)]),ot])])])],40,Fe)))),128))]),0===c.tenHotComments.length&&0===c.latestComments.length?((0,n.wg)(),(0,n.iD)("div",it,rt)):(0,n.kq)("",!0)])])])}var ut=s(3479),ct=s(5393),mt=s(9228),dt={data(){return{type:0,artistId:0,artistDetail:{},mvid:0,videoid:"",mvUrl:"",videoUrl:"",mvInfo:{},videoInfo:{},mvNums:{},isDesc:0,maxlength:140,leftover:140,commentContent:"",totalNum:0,hotComments:[],tenHotComments:[],latestComments:[],isTab:0}},mounted(){this.mvid=this.$route.query.mvid||0,this.videoid=this.$route.query.videoid||0,this.type=this.$route.query.type,sessionStorage.getItem("cookie")&&(1==this.type?(this.getMvAddress(),this.getMvDetail(),this.getMvDetailInfo(),this.getCommentMv()):(this.getVideoAdd(),this.getVideoDetail(),this.getCommentVideo()))},methods:{async getMvDetail(){const e=await(0,ct.mV)(this.mvid,sessionStorage.getItem("cookie"));this.mvInfo=e.data.data,this.artistId=this.mvInfo.artistId,this.getArtistDetail()},async getMvDetailInfo(){const e=await(0,ct.lw)(this.mvid,sessionStorage.getItem("cookie"));this.mvNums=e.data,this.totalNum=this.mvNums.commentCount},async getCommentMv(){const e=await(0,ct.Sq)(this.mvid,sessionStorage.getItem("cookie"));this.totalNum=e.data.total,this.hotComments=e.data.hotComments,this.isTab=this.hotComments.length>10?1:0,this.tenHotComments=this.hotComments.length>10?this.hotComments.splice(0,10):this.hotComments,this.latestComments=e.data.comments},async getCommentVideo(){const e=await(0,ct.aA)(this.videoid,sessionStorage.getItem("cookie"));this.totalNum=e.data.total,this.hotComments=e.data.hotComments,this.isTab=this.hotComments.length>10?1:0,this.tenHotComments=this.hotComments.length>10?this.hotComments.splice(0,10):this.hotComments,this.latestComments=e.data.comments},async getMvAddress(){const e=await(0,ct.nh)(this.mvid,sessionStorage.getItem("cookie"));this.mvUrl=e.data.data.url},async getVideoDetail(){const e=await(0,ct.O2)(this.videoid,sessionStorage.getItem("cookie"));this.videoInfo=e.data.data},async getVideoAdd(){const e=await(0,ct.sB)(this.videoid,sessionStorage.getItem("cookie"));this.videoUrl=e.data.urls[0].url},async getArtistDetail(){const e=await(0,ut.Fk)(this.artistId,sessionStorage.getItem("cookie"));this.artistDetail=e.data.data},formatPublishTime(e){return this.$formatDate(e)},mouseenter(e,t){1===t&&(this.$refs.report[e].style.display="block"),2===t&&(this.$refs.latestReport[e].style.display="block")},mouseleave(e){if(1===e)for(let t=0;t<this.$refs.report.length;t++)this.$refs.report[t].style.display="none";else for(let t=0;t<this.$refs.latestReport.length;t++)this.$refs.latestReport[t].style.display="none"},zanMouseenter(e,t){if(1===t){for(let e=0;e<this.$refs.zanIcon.length;e++)this.$refs.zanIcon[e].style.fill="#545454",this.$refs.zanNum[e].style.color="#a7a5a5";this.$refs.zanIcon[e].style.fill="#000",this.$refs.zanNum[e].style.color="#000"}else{for(let e=0;e<this.$refs.latestZanIcon.length;e++)this.$refs.latestZanIcon[e].style.fill="#545454",this.$refs.latestZanNum[e].style.color="#a7a5a5";this.$refs.latestZanIcon[e].style.fill="#000",this.$refs.latestZanNum[e].style.color="#000"}},zanMouseleave(e){if(1==e)for(let t=0;t<this.$refs.zanIcon.length;t++)this.$refs.zanIcon[t].style.fill="#545454",this.$refs.zanNum[t].style.color="#a7a5a5";else for(let t=0;t<this.$refs.latestZanIcon.length;t++)this.$refs.latestZanIcon[t].style.fill="#545454",this.$refs.latestZanNum[t].style.color="#a7a5a5"},gotoPersonalHome(e){this.$router.push({path:"/PersonalHome",query:{userId:e}})},publishTime(e,t){const s=/昨天/;if(s.test(t)){let e=t.slice(0,2)+" "+t.slice(2,t.length);return e}{let t=(new Date).getFullYear(),s=new Date(e),n=s.getFullYear(),o=s.getMonth()+1,i=s.getDate()<10?"0"+s.getDate():s.getDate(),a=(s.getHours()<10?"0"+s.getHours():s.getHours())+":",r=s.getMinutes()<10?"0"+s.getMinutes():s.getMinutes();return n===t?o+"月"+i+"日 "+a+r:n+"年"+o+"月"+i+"日 "+a+r}},goMoreHotComments(){this.$router.push({path:"/HotComments",query:{id:this.mvid,type:4}})},changeCount(e){return this.$formatCount(e)},goSingerPage(e){this.$router.push({path:"/SingerPage",query:{id:e}})},goHeadCreater(){1==this.type&&this.goSingerPage(this.artistId),2==this.type&&this.gotoPersonalHome(this.videoInfo.creator.userId)},async postComment(){var e=1==this.$route.query.type?1:5,t=1==this.$route.query.type?this.mvid:this.videoid,s=(new Date).getTime();await(0,mt.w)(1,e,t,this.commentContent,s,sessionStorage.getItem("cookie"));alert("评论成功！")}},watch:{commentContent(){this.leftover=140-this.commentContent.length}}},ht=s(89);const vt=(0,ht.Z)(dt,[["render",lt],["__scopeId","data-v-645354a3"]]);var gt=vt}}]);
//# sourceMappingURL=videoPlayer.0fcbc8ad.js.map