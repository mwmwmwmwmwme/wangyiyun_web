"use strict";(self["webpackChunkwangyiyun_web"]=self["webpackChunkwangyiyun_web"]||[]).push([[770],{4376:function(e,t,a){a.d(t,{Fk:function(){return f},I3:function(){return r},XI:function(){return i},d4:function(){return u},dX:function(){return l},e_:function(){return h},hi:function(){return s},mf:function(){return o},n1:function(){return m},nz:function(){return c},rC:function(){return d}});var n=a(7344);function s(e,t,a){return(0,n.Z)({method:"GET",url:`/search?keywords=${e}}&type=1&limit=${t}&offset=${a}`})}function o(e,t){return(0,n.Z)({method:"GET",url:`/search?keywords=${e}&type=100&limit=${20*t}`})}function i(e,t,a){return(0,n.Z)({method:"GET",url:`/search?keywords=${e}&type=10&limit=${t}&offset=${a}`})}function r(e,t,a){return(0,n.Z)({method:"GET",url:`/search?keywords=${e}&type=1014&limit=${t}&offset=${a}`})}function c(e,t,a){return(0,n.Z)({method:"GET",url:`/search?keywords=${e}&type=1000&limit=${t}&offset=${a}`})}function l(e,t,a){return(0,n.Z)({method:"GET",url:`/search?keywords=${e}&type=1006&limit=${t}&offset=${a}`})}function u(e){return(0,n.Z)({method:"GET",url:`/search?keywords=${e}&type=1009`})}function d(e,t,a){return(0,n.Z)({method:"GET",url:`/search?keywords=${e}&type=2000&limit=${t}&offset=${a}`})}function m(e,t,a){return(0,n.Z)({method:"GET",url:`/search?keywords=${e}&type=1002&limit=${t}&offset=${a}`})}function f(e,t){return(0,n.Z)({method:"GET",url:`/artist/detail?id=${e}&cookie=${t}`})}function h(e,t){return(0,n.Z)({method:"GET",url:`/artist/follow/count?id=${e}&cookie=${t}`})}},7770:function(e,t,a){a.r(t),a.d(t,{default:function(){return z}});var n=a(1132),s=(a(4484),a(2229)),o=(a(9619),a(3396)),i=a(9242),r=a(7139);const c=e=>((0,o.dD)("data-v-7343fc82"),e=e(),(0,o.Cn)(),e),l={class:"voice_box"},u=(0,o.Uk)("载入中..."),d={class:"totalCount"},m=(0,o.uE)('<div class="button" data-v-7343fc82><div class="playAll" data-v-7343fc82><svg class="icon" aria-hidden="true" data-v-7343fc82><use xlink:href="#icon-yousanjiao" data-v-7343fc82></use></svg><span data-v-7343fc82>播放全部</span><svg class="icon jia" aria-hidden="true" data-v-7343fc82><use xlink:href="#icon-jia" data-v-7343fc82></use></svg></div><div class="downloadAll" data-v-7343fc82><svg class="icon" aria-hidden="true" data-v-7343fc82><use xlink:href="#icon-xiazai" data-v-7343fc82></use></svg><span data-v-7343fc82>下载全部</span></div></div>',1),f={class:"head"},h=["src"],v=c((()=>(0,o._)("div",{class:"playKey"},[(0,o._)("svg",{class:"icon","aria-hidden":"true"},[(0,o._)("use",{"xlink:href":"#icon-yousanjiao"})])],-1))),p={class:"name"},g={class:"voiceName"},y=["innerHTML"],w={class:"playCountBox"},$=c((()=>(0,o._)("svg",{class:"icon","aria-hidden":"true"},[(0,o._)("use",{"xlink:href":"#icon-bofang"})],-1))),b={class:"playCount"},k={class:"duration"},x={class:"creator"},V=(0,o.Uk)("by "),C={class:"creatorName"};function _(e,t,a,c,_,I){const T=s.g,E=n.t,S=(0,o.Q2)("lazy");return(0,o.wg)(),(0,o.iD)("div",l,[(0,o.wy)((0,o.Wm)(T,{vertical:"",type:"spinner"},{default:(0,o.w5)((()=>[u])),_:1},512),[[i.F8,1==_.isLoading]]),(0,o._)("div",d,"找到"+(0,r.zw)(_.totalCount)+"个声音",1),m,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(_.resources,((e,t)=>((0,o.wg)(),(0,o.iD)("div",{key:t,class:(0,r.C_)(t==_.zero||t%2==0?"even voice":"odd voice")},[(0,o._)("div",f,[(0,o.wy)((0,o._)("img",{src:e.baseInfo.coverUrl,alt:""},null,8,h),[[S,e.baseInfo.coverUrl]]),v]),(0,o._)("div",p,[(0,o._)("span",g,(0,r.zw)(I.activeVoice(e.baseInfo.name)),1),1==this.isVHtmlVoice?((0,o.wg)(),(0,o.iD)("span",{key:0,class:"voiceName",innerHTML:_.vHtmlVoice},null,8,y)):(0,o.kq)("",!0)]),(0,o._)("div",w,[$,(0,o._)("span",b,(0,r.zw)(I.formatCount(e.baseInfo.adjustedPlayCount)),1)]),(0,o._)("div",k,(0,r.zw)(I.formatDuration(e.baseInfo.duration)),1),(0,o._)("div",x,[V,(0,o._)("span",C,(0,r.zw)(e.baseInfo.dj.nickname),1)])],2)))),128)),(0,o.Wm)(E,{class:"pagination",onChange:I.pageChange,modelValue:_.currentPage,"onUpdate:modelValue":t[0]||(t[0]=e=>_.currentPage=e),"prev-text":"<","next-text":">","total-items":_.totalCount,"show-page-size":9,"items-per-page":_.limit,"force-ellipses":""},null,8,["onChange","modelValue","total-items","items-per-page"])])}var I=a(4239),T=a(4376),E={data(){return{isLoading:1,limit:20,offset:0,currentPage:1,zero:0,searchKey:"",resources:[],totalCount:0,vHtmlVoice:"",isVHtmlVoice:0}},mounted(){this.searchKey=I.Z.state.searchKey,sessionStorage.getItem("searchKey")&&this.getSearchVoice()},methods:{async getSearchVoice(){let e=await(0,T.rC)(sessionStorage.getItem("searchKey"),this.limit,this.offset);this.totalCount=e.data.data.totalCount,this.resources=e.data.data.resources,0!==this.resources.length&&(this.isLoading=0)},pageChange(){this.offset=(this.currentPage-1)*this.limit,this.getSearchVoice()},formatDuration(e){return this.$formatDuration(e)},formatCount(e){return this.$formatCount(e)},activeVoice(e){let t=new RegExp(this.searchKey,"g"),a='<span style="color: rgb(27, 94, 195)">'+this.searchKey+"</span>";return e=e.replace(t,a),-1==e.indexOf(this.searchKey)?(this.isVHtmlVoice=0,e):(this.isVHtmlVoice=1,this.vHtmlVoice=e,"")}}},S=a(89);const Z=(0,S.Z)(E,[["render",_],["__scopeId","data-v-7343fc82"]]);var z=Z},1132:function(e,t,a){a.d(t,{t:function(){return p}});var n=a(1404),s=a(3396),o=a(610),i=a(5323),r=a(6048);const c="van-hairline",l=`${c}--surround`,[u,d,m]=(Symbol("van-form"),(0,o["do"])("pagination")),f=(e,t,a)=>({number:e,text:t,active:a}),h={mode:(0,i.SQ)("multi"),prevText:String,nextText:String,pageCount:(0,i.SI)(0),modelValue:(0,i.qM)(0),totalItems:(0,i.SI)(0),showPageSize:(0,i.SI)(5),itemsPerPage:(0,i.SI)(10),forceEllipses:Boolean};var v=(0,s.aZ)({name:u,props:h,emits:["change","update:modelValue"],setup(e,{emit:t,slots:a}){const n=(0,s.Fl)((()=>{const{pageCount:t,totalItems:a,itemsPerPage:n}=e,s=+t||Math.ceil(+a/+n);return Math.max(1,s)})),o=(0,s.Fl)((()=>{const t=[],a=n.value,s=+e.showPageSize,{modelValue:o,forceEllipses:i}=e;let r=1,c=a;const l=s<a;l&&(r=Math.max(o-Math.floor(s/2),1),c=r+s-1,c>a&&(c=a,r=c-s+1));for(let e=r;e<=c;e++){const a=f(e,e,e===o);t.push(a)}if(l&&s>0&&i){if(r>1){const e=f(r-1,"...");t.unshift(e)}if(c<a){const e=f(c+1,"...");t.push(e)}}return t})),i=(a,s)=>{a=(0,r.uZ)(a,1,n.value),e.modelValue!==a&&(t("update:modelValue",a),s&&t("change",a))};(0,s.m0)((()=>i(e.modelValue)));const c=()=>(0,s.Wm)("li",{class:d("page-desc")},[a.pageDesc?a.pageDesc():`${e.modelValue}/${n.value}`]),u=()=>{const{mode:t,modelValue:n}=e,o=a["prev-text"],r=1===n;return(0,s.Wm)("li",{class:[d("item",{disabled:r,border:"simple"===t,prev:!0}),l]},[(0,s.Wm)("button",{type:"button",disabled:r,onClick:()=>i(n-1,!0)},[o?o():e.prevText||m("prev")])])},h=()=>{const{mode:t,modelValue:o}=e,r=a["next-text"],c=o===n.value;return(0,s.Wm)("li",{class:[d("item",{disabled:c,border:"simple"===t,next:!0}),l]},[(0,s.Wm)("button",{type:"button",disabled:c,onClick:()=>i(o+1,!0)},[r?r():e.nextText||m("next")])])},v=()=>o.value.map((e=>(0,s.Wm)("li",{class:[d("item",{active:e.active,page:!0}),l]},[(0,s.Wm)("button",{type:"button","aria-current":e.active||void 0,onClick:()=>i(e.number,!0)},[a.page?a.page(e):e.text])])));return()=>(0,s.Wm)("nav",{role:"navigation",class:d()},[(0,s.Wm)("ul",{class:d("items")},[u(),"simple"===e.mode?c():v(),h()])])}});const p=(0,n.n)(v)},4484:function(e,t,a){a(1958)}}]);
//# sourceMappingURL=770.847f7a19.js.map