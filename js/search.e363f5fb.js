"use strict";(self["webpackChunkwangyiyun_web"]=self["webpackChunkwangyiyun_web"]||[]).push([[464],{4376:function(t,a,e){e.d(a,{Fk:function(){return m},I3:function(){return c},XI:function(){return n},d4:function(){return l},dX:function(){return o},e_:function(){return g},hi:function(){return r},mf:function(){return i},n1:function(){return d},nz:function(){return u},rC:function(){return h}});var s=e(7344);function r(t,a,e){return(0,s.Z)({method:"GET",url:`/search?keywords=${t}}&type=1&limit=${a}&offset=${e}`})}function i(t,a){return(0,s.Z)({method:"GET",url:`/search?keywords=${t}&type=100&limit=${20*a}`})}function n(t,a,e){return(0,s.Z)({method:"GET",url:`/search?keywords=${t}&type=10&limit=${a}&offset=${e}`})}function c(t,a,e){return(0,s.Z)({method:"GET",url:`/search?keywords=${t}&type=1014&limit=${a}&offset=${e}`})}function u(t,a,e){return(0,s.Z)({method:"GET",url:`/search?keywords=${t}&type=1000&limit=${a}&offset=${e}`})}function o(t,a,e){return(0,s.Z)({method:"GET",url:`/search?keywords=${t}&type=1006&limit=${a}&offset=${e}`})}function l(t){return(0,s.Z)({method:"GET",url:`/search?keywords=${t}&type=1009`})}function h(t,a,e){return(0,s.Z)({method:"GET",url:`/search?keywords=${t}&type=2000&limit=${a}&offset=${e}`})}function d(t,a,e){return(0,s.Z)({method:"GET",url:`/search?keywords=${t}&type=1002&limit=${a}&offset=${e}`})}function m(t,a){return(0,s.Z)({method:"GET",url:`/artist/detail?id=${t}&cookie=${a}`})}function g(t,a){return(0,s.Z)({method:"GET",url:`/artist/follow/count?id=${t}&cookie=${a}`})}},3317:function(t,a,e){e.r(a),e.d(a,{default:function(){return K}});var s=e(3396),r=e(7139);const i=t=>((0,s.dD)("data-v-7d11a19e"),t=t(),(0,s.Cn)(),t),n={class:"container"},c={class:"search"},u={class:"search_top"},o={key:0,class:"interested"},l=i((()=>(0,s._)("div",{class:"words"},[(0,s._)("span",null,"你可能感兴趣")],-1))),h={class:"cards"},d={class:"singerCard_left"},m={class:"headBox"},g=["src"],f={class:"singerCard_right"},y={class:"singerInfo1"},S={key:0,class:"alias"},w={key:1,class:"alias"},p={class:"singerInfo2"},_={class:"albumCard_left"},k={class:"headBox"},$=["src"],C={class:"albumCard_right"},v={class:"albumInfo1"},b={class:"albumInfo2"},I={class:"search_lists"};function T(t,a,e,i,T,A){const D=(0,s.up)("router-link"),Z=(0,s.up)("router-view"),z=(0,s.Q2)("lazy");return(0,s.wg)(),(0,s.iD)("div",n,[(0,s._)("div",c,[(0,s._)("div",u,"搜索 "+(0,r.zw)(this.searchKey),1),T.isSingerCard||T.isAlbumCard?((0,s.wg)(),(0,s.iD)("div",o,[l,(0,s._)("div",h,[T.isSingerCard?((0,s.wg)(),(0,s.iD)("div",{key:0,class:"card singerCard",onClick:a[0]||(a[0]=t=>A.goSingerPage(T.artist.id))},[(0,s._)("div",d,[(0,s._)("div",m,[(0,s.wy)((0,s._)("img",{src:T.artist.avatar},null,8,g),[[z,T.artist.avatar]])])]),(0,s._)("div",f,[(0,s._)("div",y,[(0,s._)("span",null,"歌手："+(0,r.zw)(T.artist.name),1),T.isAlia?((0,s.wg)(),(0,s.iD)("span",S,"("+(0,r.zw)(T.alia)+")",1)):(0,s.kq)("",!0),T.isTransName?((0,s.wg)(),(0,s.iD)("span",w,"("+(0,r.zw)(T.transName)+")",1)):(0,s.kq)("",!0)]),(0,s._)("div",p,[(0,s._)("span",null,"粉丝:"+(0,r.zw)(A.formatCount(T.fansCnt))+",歌曲:"+(0,r.zw)(T.artist.musicSize),1)])])])):(0,s.kq)("",!0),T.isAlbumCard?((0,s.wg)(),(0,s.iD)("div",{key:1,class:"card albumCard",onClick:a[1]||(a[1]=t=>A.goSongListDetail(T.album.id))},[(0,s._)("div",_,[(0,s._)("div",k,[(0,s.wy)((0,s._)("img",{src:T.album.blurPicUrl},null,8,$),[[z,T.album.blurPicUrl]])])]),(0,s._)("div",C,[(0,s._)("div",v,[(0,s._)("span",null,"专辑："+(0,r.zw)(T.album.name),1)]),(0,s._)("div",b,[(0,s._)("span",null,(0,r.zw)(T.album.artist.name),1)])])])):(0,s.kq)("",!0)])])):(0,s.kq)("",!0),(0,s._)("div",I,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(T.luYous,((t,a)=>((0,s.wg)(),(0,s.j4)(D,{to:t.path,class:(0,r.C_)(this.$route.path===t.path?"search_list search_list_active":"search_list"),key:a},{default:(0,s.w5)((()=>[(0,s.Uk)((0,r.zw)(t.name),1)])),_:2},1032,["to","class"])))),128))]),(0,s.Wm)(Z)])])}e(4239);var A=e(6810),D=e(2884),Z=e(4376),z={data(){return{searchKey:"正在搜索中...",luYous:[{path:"/Search/SearchSingle",name:"单曲"},{path:"/Search/SearchSinger",name:"歌手"},{path:"/Search/SearchAlbum",name:"专辑"},{path:"/Search/SearchVideo",name:"视频"},{path:"/Search/SearchSongSheet",name:"歌单"},{path:"/Search/SearchLyric",name:"歌词"},{path:"/Search/SearchPodcast",name:"播客"},{path:"/Search/SearchVoice",name:"声音"},{path:"/Search/SearchUser",name:"用户"}],isSingerCard:0,singerId:0,artist:{},isAlia:0,alia:"",isTransName:0,transName:"",fansCnt:0,isAlbumCard:0,album:{}}},mounted(){sessionStorage.getItem("searchKey")&&(this.searchKey=sessionStorage.getItem("searchKey"))},methods:{goSingerPage(t){this.$router.push({path:"/SingerPage",query:{id:t}})},goSongListDetail(t){this.$router.push({path:"/SongListDetail",query:{id:t,type:2}})},async getSearch(){if(sessionStorage.getItem("searchKey")){let t=await(0,D.on)(sessionStorage.getItem("searchKey"));t.data.result.artist.artists?(this.isSingerCard=1,this.singerId=t.data.result.artist.artists[0].id,sessionStorage.getItem("cookie")?(this.getArtistDetail(),this.getArtistFansNum()):this.isSingerCard=0):this.isSingerCard=0,t.data.result.album.albums?(this.isAlbumCard=1,this.album=t.data.result.album.albums[0]):this.isAlbumCard=0}},async getArtistDetail(){let t=await(0,Z.Fk)(this.singerId,sessionStorage.getItem("cookie"));this.artist=t.data.data.artist,this.artist.alias[0]?(this.isAlia=1,this.alia=this.artist.alias[0]):this.isAlia=0,this.artist.transNames[0]?(this.isTransName=1,this.transName=this.artist.transNames[0]):this.isTransName=0},async getArtistFansNum(){const t=await(0,Z.e_)(this.singerId,sessionStorage.getItem("cookie"));this.fansCnt=t.data.data.fansCnt},formatCount(t){return this.$formatCount(t)}},created(){A.Z.on("searchKey",(t=>{this.searchKey=t}))},watch:{searchKey(){this.getSearch()}}},E=e(89);const G=(0,E.Z)(z,[["render",T],["__scopeId","data-v-7d11a19e"]]);var K=G}}]);
//# sourceMappingURL=search.e363f5fb.js.map