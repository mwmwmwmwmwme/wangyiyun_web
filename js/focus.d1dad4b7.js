"use strict";(self["webpackChunkwangyiyun_web"]=self["webpackChunkwangyiyun_web"]||[]).push([[521],{9279:function(s,i,e){e.d(i,{EY:function(){return o},Hg:function(){return a},Nq:function(){return l},QH:function(){return r},nk:function(){return t}});var n=e(7344);function o(s){return(0,n.Z)({method:"GET",url:`/event?cookie=${s}`})}function t(s){return(0,n.Z)({method:"GET",url:`/hot/topic?cookie=${s}`})}function a(s,i,e){return(0,n.Z)({method:"GET",url:`/user/follows?uid=${s}&limit=${i}&cookie=${e}`})}function l(s,i,e){return(0,n.Z)({method:"GET",url:`/user/followeds?uid=${s}&limit=${i}&cookie=${e}`})}function r(s,i,e){return(0,n.Z)({method:"GET",url:`/user/event?uid=${s}&limit=${i}&cookie=${e}`})}},9913:function(s,i,e){e.r(i),e.d(i,{default:function(){return vi}});var n=e(2229),o=(e(9619),e(3396)),t=e(9242),a=e(7139);const l=s=>((0,o.dD)("data-v-1375e7d9"),s=s(),(0,o.Cn)(),s),r={class:"container",ref:"container"},c=(0,o.Uk)("载入中..."),u={class:"smallContainer"},d={class:"central"},g=(0,o.uE)('<div class="central_top" data-v-1375e7d9><span class="topWords" data-v-1375e7d9>动态</span><div class="postUpdates" data-v-1375e7d9><svg class="icon" aria-hidden="true" data-v-1375e7d9><use xlink:href="#icon-bianji" data-v-1375e7d9></use></svg><span data-v-1375e7d9>发动态</span></div></div>',1),p={class:"events"},v={class:"songEvent_top"},_={class:"head_box"},h=["src","onClick"],m={class:"songEvent_top_right"},f={class:"singer"},w=["onClick"],k={key:0,class:"share"},y={key:1,class:"share"},D={class:"time"},I={class:"songEvent_middle"},T={class:"description"},x=["onClick"],C={key:0,class:"song_left"},z={class:"song_head_box"},b=["src"],H=["src"],q=l((()=>(0,o._)("div",{class:"playKey"},[(0,o._)("svg",{class:"icon","aria-hidden":"true"},[(0,o._)("use",{"xlink:href":"#icon-yousanjiao"})])],-1))),L={key:1,class:"songInfo"},U={key:0,class:"songName"},S={key:1,class:"songListName"},E=l((()=>(0,o._)("div",{class:"songListTag"},[(0,o._)("span",null,"歌单")],-1))),P={key:2,class:"songSingers"},$={key:0,class:"diagonal"},J={key:3,class:"songListSinger"},j={key:0,class:"picOne"},N=["src"],F={key:1,class:"picFour"},O=["src"],B={key:2,class:"picNine"},Y=["src"],K={class:"songEvent_bottom"},Z={class:"likedCount"},G=l((()=>(0,o._)("svg",{class:"icon","aria-hidden":"true"},[(0,o._)("use",{"xlink:href":"#icon-dianzan"})],-1))),M=l((()=>(0,o._)("span",{class:"verticalLine"},"|",-1))),Q={class:"shareCount"},W=l((()=>(0,o._)("svg",{class:"icon","aria-hidden":"true"},[(0,o._)("use",{"xlink:href":"#icon-zhuanfa-mian"})],-1))),A=l((()=>(0,o._)("span",{class:"verticalLine"},"|",-1))),R={class:"commentCount"},V=l((()=>(0,o._)("svg",{class:"icon","aria-hidden":"true"},[(0,o._)("use",{"xlink:href":"#icon-kuaisuhuifu"})],-1))),X=l((()=>(0,o._)("span",{class:"verticalLine"},"|",-1))),ss=l((()=>(0,o._)("div",{class:"more"},[(0,o._)("svg",{class:"icon","aria-hidden":"true"},[(0,o._)("use",{"xlink:href":"#icon-sangedian"})])],-1))),is={class:"trendsEvent_top"},es={class:"head_box"},ns=["src","onClick"],os={class:"songEvent_top_right"},ts={class:"singer"},as=["onClick"],ls=l((()=>(0,o._)("span",{class:"share"},"发布动态",-1))),rs={class:"time"},cs={class:"trendsEvent_middle"},us={class:"description"},ds={key:0,class:"picOne"},gs=["src"],ps={key:1,class:"picFour"},vs=["src"],_s={key:2,class:"picNine"},hs=["src"],ms={class:"trendsEvent_bottom"},fs={class:"likedCount"},ws=l((()=>(0,o._)("svg",{class:"icon","aria-hidden":"true"},[(0,o._)("use",{"xlink:href":"#icon-dianzan"})],-1))),ks=l((()=>(0,o._)("span",{class:"verticalLine"},"|",-1))),ys={class:"shareCount"},Ds=l((()=>(0,o._)("svg",{class:"icon","aria-hidden":"true"},[(0,o._)("use",{"xlink:href":"#icon-zhuanfa-mian"})],-1))),Is=l((()=>(0,o._)("span",{class:"verticalLine"},"|",-1))),Ts={class:"commentCount"},xs=l((()=>(0,o._)("svg",{class:"icon","aria-hidden":"true"},[(0,o._)("use",{"xlink:href":"#icon-kuaisuhuifu"})],-1))),Cs=l((()=>(0,o._)("span",{class:"verticalLine"},"|",-1))),zs=l((()=>(0,o._)("div",{class:"more"},[(0,o._)("svg",{class:"icon","aria-hidden":"true"},[(0,o._)("use",{"xlink:href":"#icon-sangedian"})])],-1))),bs={class:"userInfo"},Hs={class:"userInfoBox"},qs={class:"boxTop"},Ls={class:"head"},Us={class:"headBox"},Ss=["src"],Es={class:"words"},Ps={class:"wordsTop"},$s={class:"gender"},Js={key:0,class:"m"},js=l((()=>(0,o._)("svg",{class:"icon","aria-hidden":"true"},[(0,o._)("use",{"xlink:href":"#icon-xingbienan"})],-1))),Ns=[js],Fs={key:1,class:"w"},Os=l((()=>(0,o._)("svg",{class:"icon","aria-hidden":"true"},[(0,o._)("use",{"xlink:href":"#icon-xingbienv"})],-1))),Bs=[Os],Ys={class:"wordsBottom"},Ks={class:"signature"},Zs={class:"boxBottom"},Gs={class:"num1"},Ms=l((()=>(0,o._)("div",null,[(0,o._)("span",{class:"num2"},"动态")],-1))),Qs={class:"num1"},Ws=l((()=>(0,o._)("div",null,[(0,o._)("span",{class:"num2"},"关注")],-1))),As={class:"num1"},Rs=l((()=>(0,o._)("div",null,[(0,o._)("span",{class:"num2"},"粉丝")],-1))),Vs={key:0,class:"hotTopic",ref:"hotTopic"},Xs=l((()=>(0,o._)("div",{class:"hotTopic_top"},[(0,o._)("div",{class:"hotTopic_top_left"},[(0,o._)("span",null,"热门话题")]),(0,o._)("div",{class:"hotTopic_top_right"},[(0,o._)("span",null,"更多>")])],-1))),si={class:"hotTopic_bottom"},ii={class:"bottom_left"},ei={class:"head"},ni=["src"],oi={class:"bottom_right"},ti={class:"words_top"},ai={class:"words_bottom"};function li(s,i,e,l,js,Os){const li=n.g,ri=(0,o.Q2)("lazy");return(0,o.wg)(),(0,o.iD)("div",r,[(0,o.wy)((0,o.Wm)(li,{vertical:"",type:"spinner"},{default:(0,o.w5)((()=>[c])),_:1},512),[[t.F8,1==js.isLoading]]),(0,o._)("div",u,[(0,o._)("div",d,[g,(0,o._)("div",p,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(js.events,((s,i)=>(0,o.wy)(((0,o.wg)(),(0,o.iD)("div",{class:"event songEvent",key:s.id},[(0,o._)("div",v,[(0,o._)("div",_,[(0,o.wy)((0,o._)("img",{src:s.user.avatarUrl,onClick:i=>Os.gotoPersonalHome(s.user.userId)},null,8,h),[[ri,s.user.avatarUrl]])]),(0,o._)("div",m,[(0,o._)("div",f,[(0,o._)("span",{class:"singerName",onClick:i=>Os.gotoPersonalHome(s.user.userId)},(0,a.zw)(s.user.nickname),9,w),18==s.type?((0,o.wg)(),(0,o.iD)("span",k,"分享单曲")):(0,o.kq)("",!0),13==s.type?((0,o.wg)(),(0,o.iD)("span",y,"分享歌单")):(0,o.kq)("",!0)]),(0,o._)("div",D,[(0,o._)("span",null,(0,a.zw)(Os.formatPublishTime(s.showTime)),1)])])]),(0,o._)("div",I,[(0,o._)("div",T,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(Os.formatDescription(Os.formatJson(s.json).msg),((s,i)=>((0,o.wg)(),(0,o.iD)("div",{class:"description_item",key:i},[(0,o._)("span",null,(0,a.zw)(s),1)])))),128))]),(0,o._)("div",{class:"song",onClick:i=>Os.eventClick(s)},[18==s.type||13==s.type?((0,o.wg)(),(0,o.iD)("div",C,[(0,o._)("div",z,[18==s.type?(0,o.wy)(((0,o.wg)(),(0,o.iD)("img",{key:0,src:Os.formatJson(s.json).song.album.blurPicUrl},null,8,b)),[[ri,Os.formatJson(s.json).song.album.blurPicUrl]]):(0,o.kq)("",!0),13==s.type?(0,o.wy)(((0,o.wg)(),(0,o.iD)("img",{key:1,src:Os.formatJson(s.json).playlist.coverImgUrl},null,8,H)),[[ri,Os.formatJson(s.json).playlist.coverImgUrl]]):(0,o.kq)("",!0),q])])):(0,o.kq)("",!0),18==s.type||13==s.type?((0,o.wg)(),(0,o.iD)("div",L,[18==s.type?((0,o.wg)(),(0,o.iD)("div",U,[(0,o._)("span",null,(0,a.zw)(Os.formatJson(s.json).song.name),1)])):(0,o.kq)("",!0),13==s.type?((0,o.wg)(),(0,o.iD)("div",S,[E,(0,o._)("span",null,(0,a.zw)(Os.formatJson(s.json).playlist.name),1)])):(0,o.kq)("",!0),18==s.type?((0,o.wg)(),(0,o.iD)("div",P,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(Os.formatJson(s.json).song.artists,((i,e)=>((0,o.wg)(),(0,o.iD)("span",{key:i.id},[(0,o.Uk)((0,a.zw)(i.name)+" ",1),e<Os.formatJson(s.json).song.artists.length-1?((0,o.wg)(),(0,o.iD)("span",$,"/")):(0,o.kq)("",!0)])))),128))])):(0,o.kq)("",!0),13==s.type?((0,o.wg)(),(0,o.iD)("div",J,"by "+(0,a.zw)(Os.formatJson(s.json).playlist.creator.nickname),1)):(0,o.kq)("",!0)])):(0,o.kq)("",!0)],8,x),1==s.pics.length?((0,o.wg)(),(0,o.iD)("div",j,[(0,o.wy)((0,o._)("img",{src:s.pics[0].originUrl},null,8,N),[[ri,s.pics[0].originUrl]])])):(0,o.kq)("",!0),4==s.pics.length?((0,o.wg)(),(0,o.iD)("div",F,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(s.pics,((s,i)=>((0,o.wg)(),(0,o.iD)("div",{class:"picBoxFour",key:i},[(0,o.wy)((0,o._)("img",{src:s.originUrl},null,8,O),[[ri,s.originUrl]])])))),128))])):(0,o.kq)("",!0),9==s.pics.length?((0,o.wg)(),(0,o.iD)("div",B,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(s.pics,((s,i)=>((0,o.wg)(),(0,o.iD)("div",{class:"picBoxNine",key:i},[(0,o.wy)((0,o._)("img",{src:s.originUrl},null,8,Y),[[ri,s.originUrl]])])))),128))])):(0,o.kq)("",!0)]),(0,o._)("div",K,[(0,o._)("div",Z,[G,(0,o._)("span",null,"("+(0,a.zw)(s.info.likedCount||0)+")",1)]),M,(0,o._)("div",Q,[W,(0,o._)("span",null,"("+(0,a.zw)(s.info.shareCount||0)+")",1)]),A,(0,o._)("div",R,[V,(0,o._)("span",null,"("+(0,a.zw)(s.info.commentCount||0)+")",1)]),X,ss])])),[[t.F8,18==s.type||13==s.type]]))),128)),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(js.events,((s,i)=>(0,o.wy)(((0,o.wg)(),(0,o.iD)("div",{class:"event trendsEvent",key:s.id},[(0,o._)("div",is,[(0,o._)("div",es,[(0,o.wy)((0,o._)("img",{src:s.user.avatarUrl,onClick:i=>Os.gotoPersonalHome(s.user.userId)},null,8,ns),[[ri,s.user.avatarUrl]])]),(0,o._)("div",os,[(0,o._)("div",ts,[(0,o._)("span",{class:"singerName",onClick:i=>Os.gotoPersonalHome(s.user.userId)},(0,a.zw)(s.user.nickname),9,as),ls]),(0,o._)("div",rs,[(0,o._)("span",null,(0,a.zw)(Os.formatPublishTime(s.showTime)),1)])])]),(0,o._)("div",cs,[(0,o._)("div",us,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(Os.formatDescription(Os.formatJson(s.json).msg),((s,i)=>((0,o.wg)(),(0,o.iD)("div",{class:"description_item",key:i},[(0,o._)("span",null,(0,a.zw)(s),1)])))),128))]),1==s.pics.length?((0,o.wg)(),(0,o.iD)("div",ds,[(0,o.wy)((0,o._)("img",{src:s.pics[0].originUrl},null,8,gs),[[ri,s.pics[0].originUrl]])])):(0,o.kq)("",!0),4==s.pics.length?((0,o.wg)(),(0,o.iD)("div",ps,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(s.pics,((s,i)=>((0,o.wg)(),(0,o.iD)("div",{class:"picBoxFour",key:i},[(0,o.wy)((0,o._)("img",{src:s.originUrl},null,8,vs),[[ri,s.originUrl]])])))),128))])):(0,o.kq)("",!0),9==s.pics.length?((0,o.wg)(),(0,o.iD)("div",_s,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(s.pics,((s,i)=>((0,o.wg)(),(0,o.iD)("div",{class:"picBoxNine",key:i},[(0,o.wy)((0,o._)("img",{src:s.originUrl},null,8,hs),[[ri,s.originUrl]])])))),128))])):(0,o.kq)("",!0)]),(0,o._)("div",ms,[(0,o._)("div",fs,[ws,(0,o._)("span",null,"("+(0,a.zw)(s.info.likedCount||0)+")",1)]),ks,(0,o._)("div",ys,[Ds,(0,o._)("span",null,"("+(0,a.zw)(s.info.shareCount||0)+")",1)]),Is,(0,o._)("div",Ts,[xs,(0,o._)("span",null,"("+(0,a.zw)(s.info.commentCount||0)+")",1)]),Cs,zs])])),[[t.F8,35==s.type]]))),128))])]),(0,o._)("div",bs,[(0,o._)("div",Hs,[(0,o._)("div",qs,[(0,o._)("div",Ls,[(0,o._)("div",Us,[(0,o._)("img",{src:js.profile.avatarUrl,onClick:i[0]||(i[0]=s=>Os.gotoPersonalHome(js.userInfo.userid))},null,8,Ss)])]),(0,o._)("div",Es,[(0,o._)("div",Ps,[(0,o._)("span",{class:"userName",onClick:i[1]||(i[1]=s=>Os.gotoPersonalHome(js.userInfo.userid))},(0,a.zw)(js.profile.nickname),1),(0,o._)("div",$s,[1==js.profile.gender?((0,o.wg)(),(0,o.iD)("div",Js,Ns)):(0,o.kq)("",!0),2==js.profile.gender?((0,o.wg)(),(0,o.iD)("div",Fs,Bs)):(0,o.kq)("",!0)])]),(0,o._)("div",Ys,[(0,o._)("span",Ks,(0,a.zw)(js.profile.signature),1)])])]),(0,o._)("div",Zs,[(0,o._)("div",{class:"num",onClick:i[2]||(i[2]=s=>Os.goTrends(js.userInfo.userid,js.userInfo.nickname,js.profile.eventCount))},[(0,o._)("div",null,[(0,o._)("span",Gs,(0,a.zw)(js.profile.eventCount),1)]),Ms]),(0,o._)("div",{class:"num followNum",onClick:i[3]||(i[3]=s=>Os.goFollows(js.userInfo.userid,1,js.userInfo.nickname,js.profile.follows))},[(0,o._)("div",null,[(0,o._)("span",Qs,(0,a.zw)(js.profile.follows),1)]),Ws]),(0,o._)("div",{class:"num",onClick:i[4]||(i[4]=s=>Os.goFollows(js.userInfo.userid,2,js.userInfo.nickname,js.profile.followeds))},[(0,o._)("div",null,[(0,o._)("span",As,(0,a.zw)(js.profile.followeds),1)]),Rs])])]),0!==js.hotTopics.length?((0,o.wg)(),(0,o.iD)("div",Vs,[Xs,(0,o._)("div",si,[(0,o._)("div",ii,[(0,o._)("div",ei,[(0,o._)("img",{src:js.hotTopics[0].sharePicUrl},null,8,ni)])]),(0,o._)("div",oi,[(0,o._)("div",ti,"#"+(0,a.zw)(js.hotTopics[0].title)+"#",1),(0,o._)("div",ai,(0,a.zw)(js.hotTopics[0].participateCount)+"人参与",1)])])],512)):(0,o.kq)("",!0)])])],512)}var ri=e(9279),ci=e(7106),ui=e(65),di={data(){return{isLoading:1,events:[],userInfo:[],profile:[],hotTopics:[],isHotTopicShow:0}},async mounted(){if(sessionStorage.getItem("cookie")){const s=await(0,ri.nk)(sessionStorage.getItem("cookie"));this.hotTopics=s.data.hot;const i=await(0,ri.EY)(sessionStorage.getItem("cookie"));this.events=i.data.event,0!==this.events.length&&(this.isLoading=0)}if(sessionStorage.getItem("userInfo")){this.userInfo=JSON.parse(sessionStorage.getItem("userInfo"));const s=await(0,ci.nE)(this.userInfo.userid,sessionStorage.getItem("cookie"));this.profile=s.data.profile}},created(){document.addEventListener("scroll",this.throttle(this.handleScroll,1e3),!0)},beforeDestroy(){document.removeEventListener("scroll",this.listenerFunction)},methods:{gotoPersonalHome(s){this.$router.push({path:"/PersonalHome",query:{userId:s}})},eventClick(s){if(18==s.type){let i=[];i.push(this.formatJson(s.json).song),this.updateIsPlayBox(1),this.updatePlayList(i),this.updateSongListName("动态"),this.updateSongListId(0),this.updatePlayListIndex(0)}13==s.type&&this.$router.push({path:"/SongListDetail",query:{id:this.formatJson(s.json).playlist.id,type:1}})},formatPublishTime(s){const i=new Date(s),e=i.getMonth()+1,n=i.getDate()<10?"0"+i.getDate():i.getDate(),o=i.getHours()<10?"0"+i.getHours():i.getHours(),t=i.getMinutes()<10?"0"+i.getMinutes():i.getMinutes(),a=(new Date).getMonth(),l=(new Date).getDate();return e==a+1&&n==l?o+":"+t:e+"月"+n+"日 "+o+":"+t},formatJson(s){const i=JSON.parse(s);return i},formatDescription(s){let i;return i=s.split(/[(\r\n)\r\n]+/).map((s=>s)),i},tagBlue(s){if(-1!==s.indexOf("#")&&-1!==s.lastIndexOf("#")&&s.indexOf("#")!==s.lastIndexOf("#")){s.slice(s.indexOf("#"),s.lastIndexOf("#")+1),s.slice(s.lastIndexOf("#")+2,s.length);return s}return s},handleScroll(){this.$refs.container.scrollTop&&(this.isHotTopicShow=this.$refs.container.scrollTop>=760?1:0)},throttle(s,i){let e=!0;return function(){e&&(s.apply(this,arguments),e=!1,setTimeout((()=>e=!0),i))}},goFollows(s,i,e,n){this.$router.push({path:"/Follows",query:{id:s,type:i,nickname:e,limit:n}})},goTrends(s,i,e){this.$router.push({path:"/Trends",query:{id:s,nickname:i,limit:e}})},...(0,ui.OI)(["updateIsPlayBox","updatePlayList","updateSongListName","updateSongListId","updatePlayListIndex","updateDuration"])},watch:{isHotTopicShow(){this.isHotTopicShow?this.$refs.hotTopic.classList.add("hotTopicShow"):this.$refs.hotTopic.classList.remove("hotTopicShow")}}},gi=e(89);const pi=(0,gi.Z)(di,[["render",li],["__scopeId","data-v-1375e7d9"]]);var vi=pi}}]);
//# sourceMappingURL=focus.d1dad4b7.js.map