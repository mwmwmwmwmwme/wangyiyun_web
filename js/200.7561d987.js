"use strict";(self["webpackChunkwangyiyun_web"]=self["webpackChunkwangyiyun_web"]||[]).push([[200],{4376:function(e,t,n){n.d(t,{Fk:function(){return d},I3:function(){return i},XI:function(){return r},d4:function(){return c},dX:function(){return u},e_:function(){return g},hi:function(){return o},mf:function(){return a},n1:function(){return h},nz:function(){return l},rC:function(){return m}});var s=n(7344);function o(e,t,n){return(0,s.Z)({method:"GET",url:`/search?keywords=${e}}&type=1&limit=${t}&offset=${n}`})}function a(e,t){return(0,s.Z)({method:"GET",url:`/search?keywords=${e}&type=100&limit=${20*t}`})}function r(e,t,n){return(0,s.Z)({method:"GET",url:`/search?keywords=${e}&type=10&limit=${t}&offset=${n}`})}function i(e,t,n){return(0,s.Z)({method:"GET",url:`/search?keywords=${e}&type=1014&limit=${t}&offset=${n}`})}function l(e,t,n){return(0,s.Z)({method:"GET",url:`/search?keywords=${e}&type=1000&limit=${t}&offset=${n}`})}function u(e,t,n){return(0,s.Z)({method:"GET",url:`/search?keywords=${e}&type=1006&limit=${t}&offset=${n}`})}function c(e){return(0,s.Z)({method:"GET",url:`/search?keywords=${e}&type=1009`})}function m(e,t,n){return(0,s.Z)({method:"GET",url:`/search?keywords=${e}&type=2000&limit=${t}&offset=${n}`})}function h(e,t,n){return(0,s.Z)({method:"GET",url:`/search?keywords=${e}&type=1002&limit=${t}&offset=${n}`})}function d(e,t){return(0,s.Z)({method:"GET",url:`/artist/detail?id=${e}&cookie=${t}`})}function g(e,t){return(0,s.Z)({method:"GET",url:`/artist/follow/count?id=${e}&cookie=${t}`})}},3200:function(e,t,n){n.r(t),n.d(t,{default:function(){return z}});var s=n(1132),o=(n(4484),n(2229)),a=(n(9619),n(3396)),r=n(9242),i=n(7139);const l=e=>((0,a.dD)("data-v-74277ebe"),e=e(),(0,a.Cn)(),e),u={class:"songSheets"},c=(0,a.Uk)("载入中..."),m={class:"playlistCount"},h=["onClick"],d={class:"head_box"},g=["src"],p={class:"songSheetNameBox"},f={class:"songSheetName"},y=["innerHTML"],S={class:"trackCount"},v={class:"creator"},w=(0,a.Uk)("by"),$={class:"creatorName"},C={class:"playCountBox"},k=l((()=>(0,a._)("svg",{class:"icon","aria-hidden":"true"},[(0,a._)("use",{"xlink:href":"#icon-bofang"})],-1))),b={class:"playCount"};function x(e,t,n,l,x,_){const T=o.g,V=s.t,Z=(0,a.Q2)("lazy");return(0,a.wg)(),(0,a.iD)("div",u,[(0,a.wy)((0,a.Wm)(T,{vertical:"",type:"spinner"},{default:(0,a.w5)((()=>[c])),_:1},512),[[r.F8,1==x.isLoading]]),(0,a._)("div",m,"找到"+(0,i.zw)(x.playlistCount)+"个歌单",1),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(x.songSheets,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{key:t,class:(0,i.C_)(t==x.zero||t%2==0?"even songSheet":"odd songSheet"),onClick:t=>_.goDetail(e.id)},[(0,a._)("div",d,[(0,a.wy)((0,a._)("img",{src:e.coverImgUrl},null,8,g),[[Z,e.coverImgUrl]])]),(0,a._)("div",p,[(0,a._)("span",f,(0,i.zw)(_.activeSongSheetName(e.name)),1),1==this.isVHtmlSongSheetName?((0,a.wg)(),(0,a.iD)("span",{key:0,class:"songSheetName",innerHTML:x.vHtmlSongSheetName},null,8,y)):(0,a.kq)("",!0)]),(0,a._)("div",S,(0,i.zw)(e.trackCount)+"首",1),(0,a._)("div",v,[w,(0,a._)("span",$,(0,i.zw)(e.creator.nickname),1)]),(0,a._)("div",C,[k,(0,a._)("span",b,(0,i.zw)(_.formatCount(e.playCount)),1)])],10,h)))),128)),(0,a.Wm)(V,{class:"pagination",onChange:_.pageChange,modelValue:x.currentPage,"onUpdate:modelValue":t[0]||(t[0]=e=>x.currentPage=e),"prev-text":"<","next-text":">","total-items":x.playlistCount>300?300:x.playlistCount,"show-page-size":9,"items-per-page":x.limit,"force-ellipses":""},null,8,["onChange","modelValue","total-items","items-per-page"])])}var _=n(4239),T=n(4376),V={data(){return{isLoading:1,limit:20,offset:0,currentPage:1,songSheets:[],zero:0,searchKey:"",playlistCount:0,vHtmlSongSheetName:"",isVHtmlSongSheetName:0}},mounted(){this.searchKey=_.Z.state.searchKey,sessionStorage.getItem("searchKey")&&this.getSearchSongSheet()},methods:{async getSearchSongSheet(){let e=await(0,T.nz)(sessionStorage.getItem("searchKey"),this.limit,this.offset);this.playlistCount=e.data.result.playlistCount,this.songSheets=e.data.result.playlists,0!==this.songSheets.length&&(this.isLoading=0)},pageChange(){this.offset=(this.currentPage-1)*this.limit,this.getSearchSongSheet()},formatCount(e){return this.$formatCount(e)},activeSongSheetName(e){let t=new RegExp(this.searchKey,"g"),n='<span style="color: rgb(27, 94, 195)">'+this.searchKey+"</span>";return e=e.replace(t,n),-1==e.indexOf(this.searchKey)?(this.isVHtmlSongSheetName=0,e):(this.isVHtmlSongSheetName=1,this.vHtmlSongSheetName=e,"")},goDetail(e){this.$router.push({path:"/SongListDetail",query:{id:e,type:1}})}}},Z=n(89);const E=(0,Z.Z)(V,[["render",x],["__scopeId","data-v-74277ebe"]]);var z=E},1132:function(e,t,n){n.d(t,{t:function(){return f}});var s=n(1404),o=n(3396),a=n(610),r=n(5323),i=n(6048);const l="van-hairline",u=`${l}--surround`,[c,m,h]=(Symbol("van-form"),(0,a["do"])("pagination")),d=(e,t,n)=>({number:e,text:t,active:n}),g={mode:(0,r.SQ)("multi"),prevText:String,nextText:String,pageCount:(0,r.SI)(0),modelValue:(0,r.qM)(0),totalItems:(0,r.SI)(0),showPageSize:(0,r.SI)(5),itemsPerPage:(0,r.SI)(10),forceEllipses:Boolean};var p=(0,o.aZ)({name:c,props:g,emits:["change","update:modelValue"],setup(e,{emit:t,slots:n}){const s=(0,o.Fl)((()=>{const{pageCount:t,totalItems:n,itemsPerPage:s}=e,o=+t||Math.ceil(+n/+s);return Math.max(1,o)})),a=(0,o.Fl)((()=>{const t=[],n=s.value,o=+e.showPageSize,{modelValue:a,forceEllipses:r}=e;let i=1,l=n;const u=o<n;u&&(i=Math.max(a-Math.floor(o/2),1),l=i+o-1,l>n&&(l=n,i=l-o+1));for(let e=i;e<=l;e++){const n=d(e,e,e===a);t.push(n)}if(u&&o>0&&r){if(i>1){const e=d(i-1,"...");t.unshift(e)}if(l<n){const e=d(l+1,"...");t.push(e)}}return t})),r=(n,o)=>{n=(0,i.uZ)(n,1,s.value),e.modelValue!==n&&(t("update:modelValue",n),o&&t("change",n))};(0,o.m0)((()=>r(e.modelValue)));const l=()=>(0,o.Wm)("li",{class:m("page-desc")},[n.pageDesc?n.pageDesc():`${e.modelValue}/${s.value}`]),c=()=>{const{mode:t,modelValue:s}=e,a=n["prev-text"],i=1===s;return(0,o.Wm)("li",{class:[m("item",{disabled:i,border:"simple"===t,prev:!0}),u]},[(0,o.Wm)("button",{type:"button",disabled:i,onClick:()=>r(s-1,!0)},[a?a():e.prevText||h("prev")])])},g=()=>{const{mode:t,modelValue:a}=e,i=n["next-text"],l=a===s.value;return(0,o.Wm)("li",{class:[m("item",{disabled:l,border:"simple"===t,next:!0}),u]},[(0,o.Wm)("button",{type:"button",disabled:l,onClick:()=>r(a+1,!0)},[i?i():e.nextText||h("next")])])},p=()=>a.value.map((e=>(0,o.Wm)("li",{class:[m("item",{active:e.active,page:!0}),u]},[(0,o.Wm)("button",{type:"button","aria-current":e.active||void 0,onClick:()=>r(e.number,!0)},[n.page?n.page(e):e.text])])));return()=>(0,o.Wm)("nav",{role:"navigation",class:m()},[(0,o.Wm)("ul",{class:m("items")},[c(),"simple"===e.mode?l():p(),g()])])}});const f=(0,s.n)(p)},4484:function(e,t,n){n(1958)}}]);
//# sourceMappingURL=200.7561d987.js.map